<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="3356pt" height="602pt"
 viewBox="0.00 0.00 3356.35 602.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 598)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-598 3352.35,-598 3352.35,4 -4,4"/>
<text text-anchor="middle" x="1674.17" y="-577.2" font-family="Times,serif" font-size="16.00">Chapter 8 – Fusion Pipelines (LC vs TC) – Execution Flow</text>
<g id="clust1" class="cluster">
<title>cluster_lc</title>
<path fill="none" stroke="#999999" d="M666.68,-340C666.68,-340 3328.35,-340 3328.35,-340 3334.35,-340 3340.35,-346 3340.35,-352 3340.35,-352 3340.35,-548 3340.35,-548 3340.35,-554 3334.35,-560 3328.35,-560 3328.35,-560 666.68,-560 666.68,-560 660.68,-560 654.68,-554 654.68,-548 654.68,-548 654.68,-352 654.68,-352 654.68,-346 660.68,-340 666.68,-340"/>
<text text-anchor="middle" x="1997.51" y="-543.2" font-family="Times,serif" font-size="16.00">Loosely Coupled (lc_uwb_imu_ekf.py)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_tc</title>
<path fill="none" stroke="#999999" d="M661.18,-94C661.18,-94 3012.35,-94 3012.35,-94 3018.35,-94 3024.35,-100 3024.35,-106 3024.35,-106 3024.35,-320 3024.35,-320 3024.35,-326 3018.35,-332 3012.35,-332 3012.35,-332 661.18,-332 661.18,-332 655.18,-332 649.18,-326 649.18,-320 649.18,-320 649.18,-106 649.18,-106 649.18,-100 655.18,-94 661.18,-94"/>
<text text-anchor="middle" x="1836.76" y="-315.2" font-family="Times,serif" font-size="16.00">Tightly Coupled (tc_uwb_imu_ekf.py)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_cmp</title>
<path fill="none" stroke="#999999" d="M675.18,-8C675.18,-8 1450.18,-8 1450.18,-8 1456.18,-8 1462.18,-14 1462.18,-20 1462.18,-20 1462.18,-74 1462.18,-74 1462.18,-80 1456.18,-86 1450.18,-86 1450.18,-86 675.18,-86 675.18,-86 669.18,-86 663.18,-80 663.18,-74 663.18,-74 663.18,-20 663.18,-20 663.18,-14 669.18,-8 675.18,-8"/>
<text text-anchor="middle" x="1062.68" y="-69.2" font-family="Times,serif" font-size="16.00">Comparison (compare_lc_tc.py)</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="black" cx="141.59" cy="-182" rx="141.67" ry="18"/>
<text text-anchor="middle" x="141.59" y="-178.9" font-family="Times,serif" font-size="12.00">Start: run a Chapter 8 fusion script</text>
</g>
<!-- choose -->
<g id="node2" class="node">
<title>choose</title>
<path fill="#ffffff" stroke="black" d="M405.87,-197.82C405.87,-197.82 331.97,-184.18 331.97,-184.18 326.07,-183.09 326.07,-180.91 331.97,-179.82 331.97,-179.82 405.87,-166.18 405.87,-166.18 411.77,-165.09 423.57,-165.09 429.47,-166.18 429.47,-166.18 503.38,-179.82 503.38,-179.82 509.28,-180.91 509.28,-183.09 503.38,-184.18 503.38,-184.18 429.47,-197.82 429.47,-197.82 423.57,-198.91 411.77,-198.91 405.87,-197.82"/>
<text text-anchor="middle" x="417.67" y="-178.9" font-family="Times,serif" font-size="12.00">Which pipeline?</text>
</g>
<!-- start&#45;&gt;choose -->
<g id="edge1" class="edge">
<title>start&#45;&gt;choose</title>
<path fill="none" stroke="black" d="M283.24,-182C292.22,-182 301.17,-182 309.95,-182"/>
<polygon fill="black" stroke="black" points="310.17,-185.5 320.17,-182 310.17,-178.5 310.17,-185.5"/>
</g>
<!-- lc1 -->
<g id="node3" class="node">
<title>lc1</title>
<path fill="#ffffff" stroke="black" d="M858.68,-394C858.68,-394 674.68,-394 674.68,-394 668.68,-394 662.68,-388 662.68,-382 662.68,-382 662.68,-370 662.68,-370 662.68,-364 668.68,-358 674.68,-358 674.68,-358 858.68,-358 858.68,-358 864.68,-358 870.68,-364 870.68,-370 870.68,-370 870.68,-382 870.68,-382 870.68,-388 864.68,-394 858.68,-394"/>
<text text-anchor="middle" x="766.68" y="-379.4" font-family="Times,serif" font-size="12.00">Parse args</text>
<text text-anchor="middle" x="766.68" y="-366.4" font-family="Times,serif" font-size="12.00">(load data dir, gating, save figs)</text>
</g>
<!-- choose&#45;&gt;lc1 -->
<g id="edge30" class="edge">
<title>choose&#45;&gt;lc1</title>
<path fill="none" stroke="black" d="M436.79,-196.51C474.44,-226.1 564.65,-294.13 649.18,-336 663.17,-342.93 678.65,-349.16 693.64,-354.53"/>
<polygon fill="black" stroke="black" points="692.81,-357.94 703.4,-357.93 695.11,-351.33 692.81,-357.94"/>
<text text-anchor="middle" x="586.18" y="-332.2" font-family="Times,serif" font-size="11.00">LC</text>
</g>
<!-- tc1 -->
<g id="node14" class="node">
<title>tc1</title>
<path fill="#ffffff" stroke="black" d="M864.18,-200C864.18,-200 669.18,-200 669.18,-200 663.18,-200 657.18,-194 657.18,-188 657.18,-188 657.18,-176 657.18,-176 657.18,-170 663.18,-164 669.18,-164 669.18,-164 864.18,-164 864.18,-164 870.18,-164 876.18,-170 876.18,-176 876.18,-176 876.18,-188 876.18,-188 876.18,-194 870.18,-200 864.18,-200"/>
<text text-anchor="middle" x="766.68" y="-185.4" font-family="Times,serif" font-size="12.00">Parse args</text>
<text text-anchor="middle" x="766.68" y="-172.4" font-family="Times,serif" font-size="12.00">(batch_update?, gating, save figs)</text>
</g>
<!-- choose&#45;&gt;tc1 -->
<g id="edge31" class="edge">
<title>choose&#45;&gt;tc1</title>
<path fill="none" stroke="black" d="M515.33,-182C556.09,-182 603.92,-182 646.8,-182"/>
<polygon fill="black" stroke="black" points="647.02,-185.5 657.02,-182 647.02,-178.5 647.02,-185.5"/>
<text text-anchor="middle" x="586.18" y="-185.2" font-family="Times,serif" font-size="11.00">TC</text>
</g>
<!-- c1 -->
<g id="node25" class="node">
<title>c1</title>
<path fill="#ffffff" stroke="black" d="M850.18,-52C850.18,-52 683.18,-52 683.18,-52 677.18,-52 671.18,-46 671.18,-40 671.18,-40 671.18,-28 671.18,-28 671.18,-22 677.18,-16 683.18,-16 683.18,-16 850.18,-16 850.18,-16 856.18,-16 862.18,-22 862.18,-28 862.18,-28 862.18,-40 862.18,-40 862.18,-46 856.18,-52 850.18,-52"/>
<text text-anchor="middle" x="766.68" y="-37.4" font-family="Times,serif" font-size="12.00">Run both pipelines</text>
<text text-anchor="middle" x="766.68" y="-24.4" font-family="Times,serif" font-size="12.00">(LC + TC) with same dataset</text>
</g>
<!-- choose&#45;&gt;c1 -->
<g id="edge32" class="edge">
<title>choose&#45;&gt;c1</title>
<path fill="none" stroke="black" d="M447.96,-169.51C506.76,-144.43 639.85,-87.67 713.75,-56.15"/>
<polygon fill="black" stroke="black" points="715.51,-59.2 723.34,-52.06 712.77,-52.76 715.51,-59.2"/>
<text text-anchor="middle" x="586.18" y="-132.2" font-family="Times,serif" font-size="11.00">Compare LC vs TC</text>
</g>
<!-- lc2 -->
<g id="node4" class="node">
<title>lc2</title>
<path fill="#ffffff" stroke="black" d="M1224.18,-402C1224.18,-402 925.18,-402 925.18,-402 919.18,-402 913.18,-396 913.18,-390 913.18,-390 913.18,-378 913.18,-378 913.18,-372 919.18,-366 925.18,-366 925.18,-366 1224.18,-366 1224.18,-366 1230.18,-366 1236.18,-372 1236.18,-378 1236.18,-378 1236.18,-390 1236.18,-390 1236.18,-396 1230.18,-402 1224.18,-402"/>
<text text-anchor="middle" x="1074.68" y="-387.4" font-family="Times,serif" font-size="12.00">Load dataset:</text>
<text text-anchor="middle" x="1074.68" y="-374.4" font-family="Times,serif" font-size="12.00">truth, IMU (100 Hz), UWB ranges (10 Hz), anchors</text>
</g>
<!-- lc1&#45;&gt;lc2 -->
<g id="edge2" class="edge">
<title>lc1&#45;&gt;lc2</title>
<path fill="none" stroke="black" d="M870.85,-378.7C881.28,-378.97 892.05,-379.25 902.95,-379.54"/>
<polygon fill="black" stroke="black" points="902.89,-383.04 912.98,-379.8 903.08,-376.04 902.89,-383.04"/>
</g>
<!-- lc3 -->
<g id="node5" class="node">
<title>lc3</title>
<path fill="#ffffff" stroke="black" d="M1434.68,-417.5C1434.68,-417.5 1315.68,-417.5 1315.68,-417.5 1309.68,-417.5 1303.68,-411.5 1303.68,-405.5 1303.68,-405.5 1303.68,-382.5 1303.68,-382.5 1303.68,-376.5 1309.68,-370.5 1315.68,-370.5 1315.68,-370.5 1434.68,-370.5 1434.68,-370.5 1440.68,-370.5 1446.68,-376.5 1446.68,-382.5 1446.68,-382.5 1446.68,-405.5 1446.68,-405.5 1446.68,-411.5 1440.68,-417.5 1434.68,-417.5"/>
<text text-anchor="middle" x="1375.18" y="-403.9" font-family="Times,serif" font-size="12.00">Build LC EKF</text>
<text text-anchor="middle" x="1375.18" y="-390.9" font-family="Times,serif" font-size="12.00">state=[x,y,vx,vy,yaw]</text>
<text text-anchor="middle" x="1375.18" y="-377.9" font-family="Times,serif" font-size="12.00">process model (IMU)</text>
</g>
<!-- lc2&#45;&gt;lc3 -->
<g id="edge3" class="edge">
<title>lc2&#45;&gt;lc3</title>
<path fill="none" stroke="black" d="M1236.29,-389.38C1256.01,-390.04 1275.47,-390.69 1293.28,-391.29"/>
<polygon fill="black" stroke="black" points="1293.45,-394.8 1303.56,-391.63 1293.68,-387.8 1293.45,-394.8"/>
</g>
<!-- lc_loop -->
<g id="node6" class="node">
<title>lc_loop</title>
<path fill="#ffffff" stroke="black" d="M1613.76,-424.09C1613.76,-424.09 1526.09,-409.91 1526.09,-409.91 1520.17,-408.96 1520.17,-407.04 1526.09,-406.09 1526.09,-406.09 1613.76,-391.91 1613.76,-391.91 1619.69,-390.96 1631.53,-390.96 1637.46,-391.91 1637.46,-391.91 1725.13,-406.09 1725.13,-406.09 1731.05,-407.04 1731.05,-408.96 1725.13,-409.91 1725.13,-409.91 1637.46,-424.09 1637.46,-424.09 1631.53,-425.04 1619.69,-425.04 1613.76,-424.09"/>
<text text-anchor="middle" x="1625.61" y="-404.9" font-family="Times,serif" font-size="12.00">For each IMU step</text>
</g>
<!-- lc3&#45;&gt;lc_loop -->
<g id="edge4" class="edge">
<title>lc3&#45;&gt;lc_loop</title>
<path fill="none" stroke="black" d="M1446.7,-397.97C1473.28,-399.47 1503.91,-401.2 1532.19,-402.79"/>
<polygon fill="black" stroke="black" points="1532.31,-406.3 1542.49,-403.37 1532.7,-399.32 1532.31,-406.3"/>
</g>
<!-- lc_prop -->
<g id="node7" class="node">
<title>lc_prop</title>
<path fill="#ffffff" stroke="black" d="M2022.88,-458C2022.88,-458 1876.88,-458 1876.88,-458 1870.88,-458 1864.88,-452 1864.88,-446 1864.88,-446 1864.88,-434 1864.88,-434 1864.88,-428 1870.88,-422 1876.88,-422 1876.88,-422 2022.88,-422 2022.88,-422 2028.88,-422 2034.88,-428 2034.88,-434 2034.88,-434 2034.88,-446 2034.88,-446 2034.88,-452 2028.88,-458 2022.88,-458"/>
<text text-anchor="middle" x="1949.88" y="-443.4" font-family="Times,serif" font-size="12.00">Propagate EKF with IMU</text>
<text text-anchor="middle" x="1949.88" y="-430.4" font-family="Times,serif" font-size="12.00">(high&#45;rate predict)</text>
</g>
<!-- lc_loop&#45;&gt;lc_prop -->
<g id="edge5" class="edge">
<title>lc_loop&#45;&gt;lc_prop</title>
<path fill="none" stroke="black" d="M1695.35,-414.83C1741.79,-419.44 1803.71,-425.59 1854.72,-430.65"/>
<polygon fill="black" stroke="black" points="1854.48,-434.14 1864.77,-431.65 1855.17,-427.18 1854.48,-434.14"/>
</g>
<!-- lc_out -->
<g id="node13" class="node">
<title>lc_out</title>
<path fill="#ffffff" stroke="black" d="M2021.38,-404C2021.38,-404 1878.38,-404 1878.38,-404 1872.38,-404 1866.38,-398 1866.38,-392 1866.38,-392 1866.38,-380 1866.38,-380 1866.38,-374 1872.38,-368 1878.38,-368 1878.38,-368 2021.38,-368 2021.38,-368 2027.38,-368 2033.38,-374 2033.38,-380 2033.38,-380 2033.38,-392 2033.38,-392 2033.38,-398 2027.38,-404 2021.38,-404"/>
<text text-anchor="middle" x="1949.88" y="-389.4" font-family="Times,serif" font-size="12.00">Evaluate errors + RMSE</text>
<text text-anchor="middle" x="1949.88" y="-376.4" font-family="Times,serif" font-size="12.00">Save plots to ch8/figs</text>
</g>
<!-- lc_loop&#45;&gt;lc_out -->
<g id="edge14" class="edge">
<title>lc_loop&#45;&gt;lc_out</title>
<path fill="none" stroke="black" d="M1704.21,-402.7C1749.94,-399.58 1808.08,-395.61 1856.21,-392.33"/>
<polygon fill="black" stroke="black" points="1856.58,-395.81 1866.32,-391.64 1856.1,-388.83 1856.58,-395.81"/>
<text text-anchor="middle" x="1765.54" y="-401.2" font-family="Times,serif" font-size="11.00">end</text>
</g>
<!-- lc_uwb -->
<g id="node8" class="node">
<title>lc_uwb</title>
<path fill="#ffffff" stroke="black" d="M2293.93,-471.42C2293.93,-471.42 2235.7,-458.58 2235.7,-458.58 2229.84,-457.29 2229.84,-454.71 2235.7,-453.42 2235.7,-453.42 2293.93,-440.58 2293.93,-440.58 2299.79,-439.29 2311.51,-439.29 2317.37,-440.58 2317.37,-440.58 2375.6,-453.42 2375.6,-453.42 2381.46,-454.71 2381.46,-457.29 2375.6,-458.58 2375.6,-458.58 2317.37,-471.42 2317.37,-471.42 2311.51,-472.71 2299.79,-472.71 2293.93,-471.42"/>
<text text-anchor="middle" x="2305.65" y="-452.9" font-family="Times,serif" font-size="12.00">UWB epoch?</text>
</g>
<!-- lc_prop&#45;&gt;lc_uwb -->
<g id="edge6" class="edge">
<title>lc_prop&#45;&gt;lc_uwb</title>
<path fill="none" stroke="black" d="M2035.16,-443.81C2093.58,-446.45 2170.76,-449.94 2227.55,-452.51"/>
<polygon fill="black" stroke="black" points="2227.4,-456.01 2237.55,-452.97 2227.72,-449.02 2227.4,-456.01"/>
</g>
<!-- lc_uwb&#45;&gt;lc_loop -->
<g id="edge8" class="edge">
<title>lc_uwb&#45;&gt;lc_loop</title>
<path fill="none" stroke="black" d="M2255.97,-463.15C2164.63,-475.22 1961.63,-495.66 1794.04,-467 1747.87,-459.1 1697.5,-439.78 1664.2,-425.39"/>
<polygon fill="black" stroke="black" points="1665.42,-422.1 1654.86,-421.29 1662.6,-428.51 1665.42,-422.1"/>
<text text-anchor="middle" x="1949.88" y="-484.2" font-family="Times,serif" font-size="11.00">no</text>
</g>
<!-- lc_wls -->
<g id="node9" class="node">
<title>lc_wls</title>
<path fill="#ffffff" stroke="black" d="M2682.97,-479.5C2682.97,-479.5 2551.97,-479.5 2551.97,-479.5 2545.97,-479.5 2539.97,-473.5 2539.97,-467.5 2539.97,-467.5 2539.97,-444.5 2539.97,-444.5 2539.97,-438.5 2545.97,-432.5 2551.97,-432.5 2551.97,-432.5 2682.97,-432.5 2682.97,-432.5 2688.97,-432.5 2694.97,-438.5 2694.97,-444.5 2694.97,-444.5 2694.97,-467.5 2694.97,-467.5 2694.97,-473.5 2688.97,-479.5 2682.97,-479.5"/>
<text text-anchor="middle" x="2617.47" y="-465.9" font-family="Times,serif" font-size="12.00">Solve UWB position fix</text>
<text text-anchor="middle" x="2617.47" y="-452.9" font-family="Times,serif" font-size="12.00">from all ranges (WLS)</text>
<text text-anchor="middle" x="2617.47" y="-439.9" font-family="Times,serif" font-size="12.00">+ covariance</text>
</g>
<!-- lc_uwb&#45;&gt;lc_wls -->
<g id="edge7" class="edge">
<title>lc_uwb&#45;&gt;lc_wls</title>
<path fill="none" stroke="black" d="M2387.64,-456C2431.31,-456 2485.2,-456 2529.72,-456"/>
<polygon fill="black" stroke="black" points="2529.94,-459.5 2539.94,-456 2529.94,-452.5 2529.94,-459.5"/>
<text text-anchor="middle" x="2468.09" y="-459.2" font-family="Times,serif" font-size="11.00">yes</text>
</g>
<!-- lc_gate -->
<g id="node10" class="node">
<title>lc_gate</title>
<path fill="#ffffff" stroke="black" d="M2919.7,-487.11C2919.7,-487.11 2805.99,-458.89 2805.99,-458.89 2800.17,-457.45 2800.17,-454.55 2805.99,-453.11 2805.99,-453.11 2919.7,-424.89 2919.7,-424.89 2925.52,-423.45 2937.17,-423.45 2942.99,-424.89 2942.99,-424.89 3056.7,-453.11 3056.7,-453.11 3062.52,-454.55 3062.52,-457.45 3056.7,-458.89 3056.7,-458.89 2942.99,-487.11 2942.99,-487.11 2937.17,-488.55 2925.52,-488.55 2919.7,-487.11"/>
<text text-anchor="middle" x="2931.35" y="-459.4" font-family="Times,serif" font-size="12.00">Innovation gating?</text>
<text text-anchor="middle" x="2931.35" y="-446.4" font-family="Times,serif" font-size="12.00">(Chi&#45;square Eq. 8.9)</text>
</g>
<!-- lc_wls&#45;&gt;lc_gate -->
<g id="edge9" class="edge">
<title>lc_wls&#45;&gt;lc_gate</title>
<path fill="none" stroke="black" d="M2695.16,-456C2722.06,-456 2753.24,-456 2783.93,-456"/>
<polygon fill="black" stroke="black" points="2784.31,-459.5 2794.31,-456 2784.31,-452.5 2784.31,-459.5"/>
</g>
<!-- lc_upd -->
<g id="node11" class="node">
<title>lc_upd</title>
<path fill="#ffffff" stroke="black" d="M3320.35,-415C3320.35,-415 3153.35,-415 3153.35,-415 3147.35,-415 3141.35,-409 3141.35,-403 3141.35,-403 3141.35,-391 3141.35,-391 3141.35,-385 3147.35,-379 3153.35,-379 3153.35,-379 3320.35,-379 3320.35,-379 3326.35,-379 3332.35,-385 3332.35,-391 3332.35,-391 3332.35,-403 3332.35,-403 3332.35,-409 3326.35,-415 3320.35,-415"/>
<text text-anchor="middle" x="3236.85" y="-400.4" font-family="Times,serif" font-size="12.00">EKF update using</text>
<text text-anchor="middle" x="3236.85" y="-387.4" font-family="Times,serif" font-size="12.00">position measurement model</text>
</g>
<!-- lc_gate&#45;&gt;lc_upd -->
<g id="edge10" class="edge">
<title>lc_gate&#45;&gt;lc_upd</title>
<path fill="none" stroke="black" d="M3008.93,-441.11C3046.57,-433.8 3092.46,-424.87 3133.1,-416.97"/>
<polygon fill="black" stroke="black" points="3133.89,-420.39 3143.03,-415.04 3132.55,-413.52 3133.89,-420.39"/>
<text text-anchor="middle" x="3104.85" y="-427.2" font-family="Times,serif" font-size="11.00">accept</text>
</g>
<!-- lc_skip -->
<g id="node12" class="node">
<title>lc_skip</title>
<path fill="#ffffff" stroke="black" d="M3309.85,-500C3309.85,-500 3163.85,-500 3163.85,-500 3157.85,-500 3151.85,-494 3151.85,-488 3151.85,-488 3151.85,-476 3151.85,-476 3151.85,-470 3157.85,-464 3163.85,-464 3163.85,-464 3309.85,-464 3309.85,-464 3315.85,-464 3321.85,-470 3321.85,-476 3321.85,-476 3321.85,-488 3321.85,-488 3321.85,-494 3315.85,-500 3309.85,-500"/>
<text text-anchor="middle" x="3236.85" y="-485.4" font-family="Times,serif" font-size="12.00">Reject / skip UWB update</text>
<text text-anchor="middle" x="3236.85" y="-472.4" font-family="Times,serif" font-size="12.00">(or solver failure)</text>
</g>
<!-- lc_gate&#45;&gt;lc_skip -->
<g id="edge11" class="edge">
<title>lc_gate&#45;&gt;lc_skip</title>
<path fill="none" stroke="black" d="M3033.83,-464.69C3068.65,-467.68 3107.45,-471 3141.66,-473.93"/>
<polygon fill="black" stroke="black" points="3141.39,-477.42 3151.65,-474.79 3141.99,-470.45 3141.39,-477.42"/>
<text text-anchor="middle" x="3104.85" y="-475.2" font-family="Times,serif" font-size="11.00">reject</text>
</g>
<!-- lc_upd&#45;&gt;lc_loop -->
<g id="edge13" class="edge">
<title>lc_upd&#45;&gt;lc_loop</title>
<path fill="none" stroke="black" d="M3163.38,-378.99C3102.21,-365.37 3012.1,-349 2932.35,-349 1948.88,-349 1948.88,-349 1948.88,-349 1879.92,-349 1861.95,-347.02 1794.04,-359 1751.15,-366.57 1703.61,-381.09 1670.19,-392.37"/>
<polygon fill="black" stroke="black" points="1669.05,-389.06 1660.72,-395.61 1671.31,-395.69 1669.05,-389.06"/>
</g>
<!-- lc_skip&#45;&gt;lc_loop -->
<g id="edge12" class="edge">
<title>lc_skip&#45;&gt;lc_loop</title>
<path fill="none" stroke="black" d="M3153.53,-500.05C3092.73,-511.82 3007.78,-525 2932.35,-525 1948.88,-525 1948.88,-525 1948.88,-525 1878.95,-525 1860.12,-519.91 1794.04,-497 1743.44,-479.45 1689.53,-448.26 1656.95,-427.86"/>
<polygon fill="black" stroke="black" points="1658.67,-424.8 1648.35,-422.41 1654.93,-430.71 1658.67,-424.8"/>
</g>
<!-- tc2 -->
<g id="node15" class="node">
<title>tc2</title>
<path fill="#ffffff" stroke="black" d="M1172.18,-200C1172.18,-200 977.18,-200 977.18,-200 971.18,-200 965.18,-194 965.18,-188 965.18,-188 965.18,-176 965.18,-176 965.18,-170 971.18,-164 977.18,-164 977.18,-164 1172.18,-164 1172.18,-164 1178.18,-164 1184.18,-170 1184.18,-176 1184.18,-176 1184.18,-188 1184.18,-188 1184.18,-194 1178.18,-200 1172.18,-200"/>
<text text-anchor="middle" x="1074.68" y="-185.4" font-family="Times,serif" font-size="12.00">Load dataset:</text>
<text text-anchor="middle" x="1074.68" y="-172.4" font-family="Times,serif" font-size="12.00">truth, IMU, UWB ranges, anchors</text>
</g>
<!-- tc1&#45;&gt;tc2 -->
<g id="edge15" class="edge">
<title>tc1&#45;&gt;tc2</title>
<path fill="none" stroke="black" d="M876.42,-182C901.83,-182 929.01,-182 954.82,-182"/>
<polygon fill="black" stroke="black" points="955.02,-185.5 965.02,-182 955.02,-178.5 955.02,-185.5"/>
</g>
<!-- tc3 -->
<g id="node16" class="node">
<title>tc3</title>
<path fill="#ffffff" stroke="black" d="M1465.18,-212C1465.18,-212 1285.18,-212 1285.18,-212 1279.18,-212 1273.18,-206 1273.18,-200 1273.18,-200 1273.18,-164 1273.18,-164 1273.18,-158 1279.18,-152 1285.18,-152 1285.18,-152 1465.18,-152 1465.18,-152 1471.18,-152 1477.18,-158 1477.18,-164 1477.18,-164 1477.18,-200 1477.18,-200 1477.18,-206 1471.18,-212 1465.18,-212"/>
<text text-anchor="middle" x="1375.18" y="-198.4" font-family="Times,serif" font-size="12.00">Build TC EKF</text>
<text text-anchor="middle" x="1375.18" y="-185.4" font-family="Times,serif" font-size="12.00">state=[x,y,vx,vy,yaw]</text>
<text text-anchor="middle" x="1375.18" y="-172.4" font-family="Times,serif" font-size="12.00">process model (IMU)</text>
<text text-anchor="middle" x="1375.18" y="-159.4" font-family="Times,serif" font-size="12.00">range meas models per anchor</text>
</g>
<!-- tc2&#45;&gt;tc3 -->
<g id="edge16" class="edge">
<title>tc2&#45;&gt;tc3</title>
<path fill="none" stroke="black" d="M1184.29,-182C1209.89,-182 1237.23,-182 1262.95,-182"/>
<polygon fill="black" stroke="black" points="1263.1,-185.5 1273.1,-182 1263.1,-178.5 1263.1,-185.5"/>
</g>
<!-- tc4 -->
<g id="node17" class="node">
<title>tc4</title>
<path fill="#ffffff" stroke="black" d="M1700.61,-205.5C1700.61,-205.5 1550.61,-205.5 1550.61,-205.5 1544.61,-205.5 1538.61,-199.5 1538.61,-193.5 1538.61,-193.5 1538.61,-170.5 1538.61,-170.5 1538.61,-164.5 1544.61,-158.5 1550.61,-158.5 1550.61,-158.5 1700.61,-158.5 1700.61,-158.5 1706.61,-158.5 1712.61,-164.5 1712.61,-170.5 1712.61,-170.5 1712.61,-193.5 1712.61,-193.5 1712.61,-199.5 1706.61,-205.5 1700.61,-205.5"/>
<text text-anchor="middle" x="1625.61" y="-191.9" font-family="Times,serif" font-size="12.00">Create time&#45;ordered</text>
<text text-anchor="middle" x="1625.61" y="-178.9" font-family="Times,serif" font-size="12.00">StampedMeasurement list</text>
<text text-anchor="middle" x="1625.61" y="-165.9" font-family="Times,serif" font-size="12.00">(IMU + UWB)</text>
</g>
<!-- tc3&#45;&gt;tc4 -->
<g id="edge17" class="edge">
<title>tc3&#45;&gt;tc4</title>
<path fill="none" stroke="black" d="M1477.23,-182C1494.02,-182 1511.41,-182 1528.09,-182"/>
<polygon fill="black" stroke="black" points="1528.38,-185.5 1538.38,-182 1528.37,-178.5 1528.38,-185.5"/>
</g>
<!-- tc_loop -->
<g id="node18" class="node">
<title>tc_loop</title>
<path fill="#ffffff" stroke="black" d="M1937.96,-198.62C1937.96,-198.62 1806.13,-183.38 1806.13,-183.38 1800.17,-182.69 1800.17,-181.31 1806.13,-180.62 1806.13,-180.62 1937.96,-165.38 1937.96,-165.38 1943.92,-164.69 1955.84,-164.69 1961.8,-165.38 1961.8,-165.38 2093.62,-180.62 2093.62,-180.62 2099.58,-181.31 2099.58,-182.69 2093.62,-183.38 2093.62,-183.38 1961.8,-198.62 1961.8,-198.62 1955.84,-199.31 1943.92,-199.31 1937.96,-198.62"/>
<text text-anchor="middle" x="1949.88" y="-178.9" font-family="Times,serif" font-size="12.00">Next measurement by time</text>
</g>
<!-- tc4&#45;&gt;tc_loop -->
<g id="edge18" class="edge">
<title>tc4&#45;&gt;tc_loop</title>
<path fill="none" stroke="black" d="M1712.97,-182C1735.01,-182 1759.45,-182 1784,-182"/>
<polygon fill="black" stroke="black" points="1784.15,-185.5 1794.15,-182 1784.15,-178.5 1784.15,-185.5"/>
</g>
<!-- tc_prop -->
<g id="node19" class="node">
<title>tc_prop</title>
<path fill="#ffffff" stroke="black" d="M2359.65,-158C2359.65,-158 2251.65,-158 2251.65,-158 2245.65,-158 2239.65,-152 2239.65,-146 2239.65,-146 2239.65,-134 2239.65,-134 2239.65,-128 2245.65,-122 2251.65,-122 2251.65,-122 2359.65,-122 2359.65,-122 2365.65,-122 2371.65,-128 2371.65,-134 2371.65,-134 2371.65,-146 2371.65,-146 2371.65,-152 2365.65,-158 2359.65,-158"/>
<text text-anchor="middle" x="2305.65" y="-143.4" font-family="Times,serif" font-size="12.00">IMU measurement:</text>
<text text-anchor="middle" x="2305.65" y="-130.4" font-family="Times,serif" font-size="12.00">propagate EKF</text>
</g>
<!-- tc_loop&#45;&gt;tc_prop -->
<g id="edge19" class="edge">
<title>tc_loop&#45;&gt;tc_prop</title>
<path fill="none" stroke="black" d="M2027.2,-172.94C2087.02,-165.84 2169.8,-156.01 2229.35,-148.94"/>
<polygon fill="black" stroke="black" points="2229.92,-152.4 2239.44,-147.74 2229.1,-145.44 2229.92,-152.4"/>
<text text-anchor="middle" x="2138.21" y="-164.2" font-family="Times,serif" font-size="11.00">IMU</text>
</g>
<!-- tc_uwb -->
<g id="node20" class="node">
<title>tc_uwb</title>
<path fill="#ffffff" stroke="black" d="M2293.75,-276.41C2293.75,-276.41 2182.66,-261.59 2182.66,-261.59 2176.72,-260.79 2176.72,-259.21 2182.66,-258.41 2182.66,-258.41 2293.75,-243.59 2293.75,-243.59 2299.7,-242.79 2311.59,-242.79 2317.54,-243.59 2317.54,-243.59 2428.63,-258.41 2428.63,-258.41 2434.58,-259.21 2434.58,-260.79 2428.63,-261.59 2428.63,-261.59 2317.54,-276.41 2317.54,-276.41 2311.59,-277.21 2299.7,-277.21 2293.75,-276.41"/>
<text text-anchor="middle" x="2305.65" y="-256.9" font-family="Times,serif" font-size="12.00">UWB measurement(s)?</text>
</g>
<!-- tc_loop&#45;&gt;tc_uwb -->
<g id="edge20" class="edge">
<title>tc_loop&#45;&gt;tc_uwb</title>
<path fill="none" stroke="black" d="M2001.43,-194.17C2045.92,-204.77 2112.51,-220.39 2170.71,-233 2193.33,-237.9 2218.16,-242.99 2240.23,-247.41"/>
<polygon fill="black" stroke="black" points="2239.67,-250.86 2250.16,-249.39 2241.04,-244 2239.67,-250.86"/>
<text text-anchor="middle" x="2138.21" y="-230.2" font-family="Times,serif" font-size="11.00">UWB</text>
</g>
<!-- tc_out -->
<g id="node24" class="node">
<title>tc_out</title>
<path fill="#ffffff" stroke="black" d="M2377.15,-223.5C2377.15,-223.5 2234.15,-223.5 2234.15,-223.5 2228.15,-223.5 2222.15,-217.5 2222.15,-211.5 2222.15,-211.5 2222.15,-188.5 2222.15,-188.5 2222.15,-182.5 2228.15,-176.5 2234.15,-176.5 2234.15,-176.5 2377.15,-176.5 2377.15,-176.5 2383.15,-176.5 2389.15,-182.5 2389.15,-188.5 2389.15,-188.5 2389.15,-211.5 2389.15,-211.5 2389.15,-217.5 2383.15,-223.5 2377.15,-223.5"/>
<text text-anchor="middle" x="2305.65" y="-209.9" font-family="Times,serif" font-size="12.00">Evaluate errors + RMSE</text>
<text text-anchor="middle" x="2305.65" y="-196.9" font-family="Times,serif" font-size="12.00">(also IMU&#45;only baseline)</text>
<text text-anchor="middle" x="2305.65" y="-183.9" font-family="Times,serif" font-size="12.00">Save plots to ch8/figs</text>
</g>
<!-- tc_loop&#45;&gt;tc_out -->
<g id="edge27" class="edge">
<title>tc_loop&#45;&gt;tc_out</title>
<path fill="none" stroke="black" d="M2058.46,-187.47C2107.42,-189.96 2164.79,-192.88 2211.82,-195.28"/>
<polygon fill="black" stroke="black" points="2211.84,-198.78 2222,-195.8 2212.19,-191.79 2211.84,-198.78"/>
<text text-anchor="middle" x="2138.21" y="-195.2" font-family="Times,serif" font-size="11.00">end</text>
</g>
<!-- tc_prop&#45;&gt;tc_loop -->
<g id="edge21" class="edge">
<title>tc_prop&#45;&gt;tc_loop</title>
<path fill="none" stroke="black" d="M2239.62,-143.72C2205.11,-146.02 2162.03,-149.42 2123.71,-154 2089.8,-158.05 2052.37,-163.94 2021.04,-169.27"/>
<polygon fill="black" stroke="black" points="2020.35,-165.84 2011.09,-170.98 2021.54,-172.74 2020.35,-165.84"/>
</g>
<!-- tc_batch -->
<g id="node21" class="node">
<title>tc_batch</title>
<path fill="#ffffff" stroke="black" d="M2605.6,-276.25C2605.6,-276.25 2507.58,-261.75 2507.58,-261.75 2501.64,-260.88 2501.64,-259.12 2507.58,-258.25 2507.58,-258.25 2605.6,-243.75 2605.6,-243.75 2611.53,-242.88 2623.4,-242.88 2629.34,-243.75 2629.34,-243.75 2727.36,-258.25 2727.36,-258.25 2733.29,-259.12 2733.29,-260.88 2727.36,-261.75 2727.36,-261.75 2629.34,-276.25 2629.34,-276.25 2623.4,-277.12 2611.53,-277.12 2605.6,-276.25"/>
<text text-anchor="middle" x="2617.47" y="-256.9" font-family="Times,serif" font-size="12.00">Batch update mode?</text>
</g>
<!-- tc_uwb&#45;&gt;tc_batch -->
<g id="edge22" class="edge">
<title>tc_uwb&#45;&gt;tc_batch</title>
<path fill="none" stroke="black" d="M2440.74,-260C2455.49,-260 2470.49,-260 2485.21,-260"/>
<polygon fill="black" stroke="black" points="2485.34,-263.5 2495.34,-260 2485.34,-256.5 2485.34,-263.5"/>
</g>
<!-- tc_upd_batch -->
<g id="node22" class="node">
<title>tc_upd_batch</title>
<path fill="#ffffff" stroke="black" d="M3004.35,-197.5C3004.35,-197.5 2858.35,-197.5 2858.35,-197.5 2852.35,-197.5 2846.35,-191.5 2846.35,-185.5 2846.35,-185.5 2846.35,-136.5 2846.35,-136.5 2846.35,-130.5 2852.35,-124.5 2858.35,-124.5 2858.35,-124.5 3004.35,-124.5 3004.35,-124.5 3010.35,-124.5 3016.35,-130.5 3016.35,-136.5 3016.35,-136.5 3016.35,-185.5 3016.35,-185.5 3016.35,-191.5 3010.35,-197.5 3004.35,-197.5"/>
<text text-anchor="middle" x="2931.35" y="-183.9" font-family="Times,serif" font-size="12.00">Build z,y,H for all ranges</text>
<text text-anchor="middle" x="2931.35" y="-170.9" font-family="Times,serif" font-size="12.00">at this epoch</text>
<text text-anchor="middle" x="2931.35" y="-157.9" font-family="Times,serif" font-size="12.00">Compute S, NIS</text>
<text text-anchor="middle" x="2931.35" y="-144.9" font-family="Times,serif" font-size="12.00">Gate (Chi&#45;square Eq. 8.9)</text>
<text text-anchor="middle" x="2931.35" y="-131.9" font-family="Times,serif" font-size="12.00">Update EKF</text>
</g>
<!-- tc_batch&#45;&gt;tc_upd_batch -->
<g id="edge23" class="edge">
<title>tc_batch&#45;&gt;tc_upd_batch</title>
<path fill="none" stroke="black" d="M2657.02,-247.76C2701.48,-233.65 2776.16,-209.94 2836.24,-190.87"/>
<polygon fill="black" stroke="black" points="2837.65,-194.1 2846.13,-187.73 2835.54,-187.42 2837.65,-194.1"/>
<text text-anchor="middle" x="2766.85" y="-216.2" font-family="Times,serif" font-size="11.00">yes</text>
</g>
<!-- tc_upd_seq -->
<g id="node23" class="node">
<title>tc_upd_seq</title>
<path fill="#ffffff" stroke="black" d="M2998.85,-296C2998.85,-296 2863.85,-296 2863.85,-296 2857.85,-296 2851.85,-290 2851.85,-284 2851.85,-284 2851.85,-248 2851.85,-248 2851.85,-242 2857.85,-236 2863.85,-236 2863.85,-236 2998.85,-236 2998.85,-236 3004.85,-236 3010.85,-242 3010.85,-248 3010.85,-248 3010.85,-284 3010.85,-284 3010.85,-290 3004.85,-296 2998.85,-296"/>
<text text-anchor="middle" x="2931.35" y="-282.4" font-family="Times,serif" font-size="12.00">For each anchor range:</text>
<text text-anchor="middle" x="2931.35" y="-269.4" font-family="Times,serif" font-size="12.00">compute innovation</text>
<text text-anchor="middle" x="2931.35" y="-256.4" font-family="Times,serif" font-size="12.00">(optional gate)</text>
<text text-anchor="middle" x="2931.35" y="-243.4" font-family="Times,serif" font-size="12.00">update EKF</text>
</g>
<!-- tc_batch&#45;&gt;tc_upd_seq -->
<g id="edge24" class="edge">
<title>tc_batch&#45;&gt;tc_upd_seq</title>
<path fill="none" stroke="black" d="M2725.36,-262.06C2763.24,-262.79 2805.41,-263.6 2841.61,-264.29"/>
<polygon fill="black" stroke="black" points="2841.59,-267.79 2851.66,-264.49 2841.73,-260.79 2841.59,-267.79"/>
<text text-anchor="middle" x="2766.85" y="-266.2" font-family="Times,serif" font-size="11.00">no</text>
</g>
<!-- tc_upd_batch&#45;&gt;tc_loop -->
<g id="edge25" class="edge">
<title>tc_upd_batch&#45;&gt;tc_loop</title>
<path fill="none" stroke="black" d="M2846.08,-143.95C2705.36,-118.09 2413.99,-75.72 2170.71,-113 2107.48,-122.69 2037.47,-147.2 1993.82,-164.23"/>
<polygon fill="black" stroke="black" points="1992.4,-161.03 1984.38,-167.95 1994.97,-167.54 1992.4,-161.03"/>
</g>
<!-- tc_upd_seq&#45;&gt;tc_loop -->
<g id="edge26" class="edge">
<title>tc_upd_seq&#45;&gt;tc_loop</title>
<path fill="none" stroke="black" d="M2851.73,-280.84C2712.44,-304.34 2414.06,-342.13 2170.71,-287 2099.23,-270.81 2023.79,-228.43 1982.51,-202.73"/>
<polygon fill="black" stroke="black" points="1984.31,-199.73 1973.99,-197.36 1980.58,-205.65 1984.31,-199.73"/>
</g>
<!-- c2 -->
<g id="node26" class="node">
<title>c2</title>
<path fill="#ffffff" stroke="black" d="M1166.18,-52C1166.18,-52 983.18,-52 983.18,-52 977.18,-52 971.18,-46 971.18,-40 971.18,-40 971.18,-28 971.18,-28 971.18,-22 977.18,-16 983.18,-16 983.18,-16 1166.18,-16 1166.18,-16 1172.18,-16 1178.18,-22 1178.18,-28 1178.18,-28 1178.18,-40 1178.18,-40 1178.18,-46 1172.18,-52 1166.18,-52"/>
<text text-anchor="middle" x="1074.68" y="-37.4" font-family="Times,serif" font-size="12.00">Compute comparative metrics</text>
<text text-anchor="middle" x="1074.68" y="-24.4" font-family="Times,serif" font-size="12.00">(RMSE, NIS stats, gating rates)</text>
</g>
<!-- c1&#45;&gt;c2 -->
<g id="edge28" class="edge">
<title>c1&#45;&gt;c2</title>
<path fill="none" stroke="black" d="M862.4,-34C893.53,-34 928.43,-34 960.76,-34"/>
<polygon fill="black" stroke="black" points="961.16,-37.5 971.16,-34 961.16,-30.5 961.16,-37.5"/>
</g>
<!-- c3 -->
<g id="node27" class="node">
<title>c3</title>
<path fill="#ffffff" stroke="black" d="M1442.18,-52C1442.18,-52 1308.18,-52 1308.18,-52 1302.18,-52 1296.18,-46 1296.18,-40 1296.18,-40 1296.18,-28 1296.18,-28 1296.18,-22 1302.18,-16 1308.18,-16 1308.18,-16 1442.18,-16 1442.18,-16 1448.18,-16 1454.18,-22 1454.18,-28 1454.18,-28 1454.18,-40 1454.18,-40 1454.18,-46 1448.18,-52 1442.18,-52"/>
<text text-anchor="middle" x="1375.18" y="-37.4" font-family="Times,serif" font-size="12.00">Plot side&#45;by&#45;side results</text>
<text text-anchor="middle" x="1375.18" y="-24.4" font-family="Times,serif" font-size="12.00">Save report/figs</text>
</g>
<!-- c2&#45;&gt;c3 -->
<g id="edge29" class="edge">
<title>c2&#45;&gt;c3</title>
<path fill="none" stroke="black" d="M1178.4,-34C1213.25,-34 1251.86,-34 1285.51,-34"/>
<polygon fill="black" stroke="black" points="1285.79,-37.5 1295.79,-34 1285.79,-30.5 1285.79,-37.5"/>
</g>
</g>
</svg>
